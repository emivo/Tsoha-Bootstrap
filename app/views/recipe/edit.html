{% extends "base.html" %}
{% block content %}
{% import "macros/_forms.html" as forms %}
<h1>Muokkaa resepti채</h1>
<form method="post" action="{{base_path}}/recipe/{{recipe.id}}/edit">
    {{ forms.name_input(recipe) }}
    <div class="form-group">
        <table>
            <tr>
                <td>
                    <label>M채채r채<span class="badge"><span class="glyphicon glyphicon-asterisk"
                                                          aria-disabled="true"></span></span></label>
                </td>
                <td>
                    <label>Ainesosa<span class="badge"><span class="glyphicon glyphicon-asterisk"
                                                             aria-disabled="true"></span></span></label>
                </td>
            </tr>
            {% set ingredientCount = 0 %}
            {% for ingredient in ingredients %}
            <tr>
                <td>
                    <input disabled class="form-control" name="quantity[{{ingredientCount}}]"
                           value="{{ingredient.quantity}}"
                           type="text">
                </td>
                <td>
                    <input disabled class="form-control" name="ingredient[{{ingredientCount}}]"
                           value="{{ingredient.name}}"
                           type="text">
                </td>
                <td>
                    <button formmethod="post"
                            formaction="{{base_path}}/recipe/{{recipe.id}}/delete_ingredient/{{ingredient.name}}"
                            class="btn btn-danger" data-confirm="Oletko varma?" name="destroy">
                        <span class="glyphicon glyphicon-remove-sign"></span>
                        Poista ainesosa
                    </button>
                </td>
            </tr>
            {% set ingredientCount = ingredientCount + 1 %}
            {% endfor %}
        </table>
    </div>
    <script>var indexCountForIngredient = 0;</script>
    <span id="newIngredient"></span>
    <div class="form-group">
        {{ forms.add_new_ingredient(0)}}
    </div>

    {{ forms.directions_textarea(recipe) }}

    {{ forms.cooking_time_input(recipe) }}


    {% set keywordCount = 0 %}
    {% for keyword in keywords %}
    <div class="form-group">
        <div class="input-group">
            <input disabled class="form-control" name="keyword[{{keywordCount}}]" value="{{keyword.keyword}}"
                   type="text">
        <span class="input-group-btn">
            <button formmethod="post"
                    formaction="{{base_path}}/recipe/{{recipe.id}}/delete_keyword/{{keyword.keyword}}"
                    class="btn btn-danger" data-confirm="Oletko varma?" name="destroy">
                <span class="glyphicon glyphicon-remove-sign"></span>
                Poista Hakusana
            </button>
        </span>
        </div>
    </div>
    {% set keywordCount = keywordCount + 1 %}
    {% endfor %}
    <span id="newKeyword"></span>
    <script>var indexCountForKeyword = 0;</script>
    <div class="form-group">
        {{ forms.add_new_keyword(0)}}
    </div>


    <div class="form-group">
        <button type="submit" class="btn btn-primary">
            <span class="glyphicon glyphicon-floppy-disk"></span>
            Tallenna
        </button>
    </div>
</form>
{{ forms.destroy_button(base_path, recipe.id)}}
{% endblock %}
